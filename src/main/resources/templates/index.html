<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Library Management System</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #f4f4f4;
    margin: 0;
    padding: 20px;
}

h1 {
    text-align: center;
}

.container {
    max-width: 900px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 10px;
}

input, button {
    padding: 8px;
    margin: 5px;
}

button {
    background: #007bff;
    color: white;
    border: none;
    cursor: pointer;
}

button:hover {
    background: #0056b3;
}

table {
    width: 100%;
    margin-top: 20px;
    border-collapse: collapse;
}

th, td {
    padding: 10px;
    border: 1px solid #ddd;
    text-align: center;
}

.stats {
    display: flex;
    justify-content: space-around;
    margin: 15px 0;
    font-weight: bold;
}
</style>
</head>

<body>

<div class="container">
<h1>ðŸ“š Library Management System</h1>

<div class="stats">
<div>Total: <span id="total">0</span></div>
<div>Issued: <span id="issued">0</span></div>
<div>Available: <span id="available">0</span></div>
</div>

<input type="text" id="bookId" placeholder="Book ID">
<input type="text" id="bookName" placeholder="Book Name">
<button onclick="addBook()">Add Book</button>

<br>

<input type="text" id="search" placeholder="Search book..."
onkeyup="searchBook()">

<table>
<thead>
<tr>
<th>ID</th>
<th>Name</th>
<th>Status</th>
<th>Actions</th>
</tr>
</thead>

<tbody id="bookList"></tbody>
</table>

</div>

<script>
let books = JSON.parse(localStorage.getItem("books")) || [];

function saveData() {
    localStorage.setItem("books", JSON.stringify(books));
}

function updateStats() {
    document.getElementById("total").innerText = books.length;
    document.getElementById("issued").innerText =
        books.filter(b => b.status === "Issued").length;
    document.getElementById("available").innerText =
        books.filter(b => b.status === "Available").length;
}

function displayBooks(data = books) {
    let list = document.getElementById("bookList");
    list.innerHTML = "";

    data.forEach((book, index) => {
        list.innerHTML += `
        <tr>
            <td>${book.id}</td>
            <td>${book.name}</td>
            <td>${book.status}</td>
            <td>
                <button onclick="toggleStatus(${index})">
                    Issue/Return
                </button>
                <button onclick="deleteBook(${index})">
                    Delete
                </button>
            </td>
        </tr>`;
    });

    updateStats();
}

function addBook() {
    let id = document.getElementById("bookId").value.trim();
    let name = document.getElementById("bookName").value.trim();

    if (!id || !name) {
        alert("Please fill all fields");
        return;
    }

    if (books.some(b => b.id === id)) {
        alert("Book ID already exists");
        return;
    }

    books.push({ id, name, status: "Available" });
    saveData();
    displayBooks();

    document.getElementById("bookId").value = "";
    document.getElementById("bookName").value = "";
}

function deleteBook(index) {
    books.splice(index, 1);
    saveData();
    displayBooks();
}

function toggleStatus(index) {
    books[index].status =
        books[index].status === "Available"
        ? "Issued" : "Available";

    saveData();
    displayBooks();
}

function searchBook() {
    let value = document.getElementById("search")
        .value.toLowerCase();

    let filtered = books.filter(b =>
        b.name.toLowerCase().includes(value) ||
        b.id.toLowerCase().includes(value)
    );

    displayBooks(filtered);
}

displayBooks();
</script>

</body>
</html>
